2019-10-17 15:43:58,148 TestSqlUser FATAL - Error Code :-2146232060 - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 15:43:58,173 TestSqlUser2 FATAL - Errors :Message : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Exception Number : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Source : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Server : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Procedure : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. LineNumber : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.Message : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Exception Number : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Source : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Server : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Procedure : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. LineNumber : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 15:43:58,184 TestUser FATAL - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
System.Data.SqlClient.SqlException (0x80131904): AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at EMIS.PatientFlow.DatabaseAccess.DbAccess.AddKioskDetails(Kiosk kiosk, String user) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.DatabaseAccess\DBAccess.Kiosk.cs:line 1145
   at EMIS.PatientFlow.Repositories.KioskRepository.AddKioskDetails(Kiosk kiosk) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.Repositories\KioskRepository.cs:line 287
ClientConnectionId:28c13d7b-e822-40c8-a89f-d48fa7aaa3bf
Error Number:50000,State:1,Class:16
2019-10-17 15:44:34,387 TestSqlUser FATAL - Error Code :-2146232060 - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 15:44:34,427 TestSqlUser2 FATAL - Errors :Message : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Exception Number : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Source : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Server : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Procedure : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. LineNumber : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.Message : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Exception Number : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Source : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Server : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Procedure : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. LineNumber : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 15:44:34,440 TestUser FATAL - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
System.Data.SqlClient.SqlException (0x80131904): AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at EMIS.PatientFlow.DatabaseAccess.DbAccess.AddKioskDetails(Kiosk kiosk, String user) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.DatabaseAccess\DBAccess.Kiosk.cs:line 1145
   at EMIS.PatientFlow.Repositories.KioskRepository.AddKioskDetails(Kiosk kiosk) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.Repositories\KioskRepository.cs:line 287
ClientConnectionId:28c13d7b-e822-40c8-a89f-d48fa7aaa3bf
Error Number:50000,State:1,Class:16
2019-10-17 15:46:19,344 TestSqlUser FATAL - Error Code :-2146232060 - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 15:46:19,348 TestSqlUser2 FATAL - Errors :Message : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Exception Number : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Source : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Server : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Procedure : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. LineNumber : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.Message : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Exception Number : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Source : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Server : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Procedure : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. LineNumber : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 15:46:19,350 TestUser FATAL - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
System.Data.SqlClient.SqlException (0x80131904): AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at EMIS.PatientFlow.DatabaseAccess.DbAccess.AddKioskDetails(Kiosk kiosk, String user) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.DatabaseAccess\DBAccess.Kiosk.cs:line 1145
   at EMIS.PatientFlow.Repositories.KioskRepository.AddKioskDetails(Kiosk kiosk) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.Repositories\KioskRepository.cs:line 287
ClientConnectionId:28c13d7b-e822-40c8-a89f-d48fa7aaa3bf
Error Number:50000,State:1,Class:16
2019-10-17 15:50:32,956 TestUser FATAL - There are not enough fields in the Structured type.  Structured types must have at least one field.
System.ArgumentException: There are not enough fields in the Structured type.  Structured types must have at least one field.
   at System.Data.SqlClient.TdsParser.TdsExecuteRPC(SqlCommand cmd, _SqlRPC[] rpcArray, Int32 timeout, Boolean inSchema, SqlNotificationRequest notificationRequest, TdsParserStateObject stateObj, Boolean isCommandProc, Boolean sync, TaskCompletionSource`1 completion, Int32 startRpc, Int32 startParam)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at EMIS.PatientFlow.DatabaseAccess.DbAccess.AddKioskDetails(Kiosk kiosk, String user) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.DatabaseAccess\DBAccess.Kiosk.cs:line 1145
   at EMIS.PatientFlow.Repositories.KioskRepository.AddKioskDetails(Kiosk kiosk) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.Repositories\KioskRepository.cs:line 287
2019-10-17 15:51:52,190 TestSqlUser FATAL - Error Code :-2146232060 - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 15:51:52,197 TestSqlUser2 FATAL - Errors :Message : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Exception Number : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Source : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Server : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. Procedure : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'. LineNumber : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.Message : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Exception Number : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Source : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Server : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Procedure : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. LineNumber : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 15:51:52,198 TestUser FATAL - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
System.Data.SqlClient.SqlException (0x80131904): AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_TypeId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Organisation", column 'OrganisationId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at EMIS.PatientFlow.DatabaseAccess.DbAccess.AddKioskDetails(Kiosk kiosk, String user) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.DatabaseAccess\DBAccess.Kiosk.cs:line 1145
   at EMIS.PatientFlow.Repositories.KioskRepository.AddKioskDetails(Kiosk kiosk) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.Repositories\KioskRepository.cs:line 287
ClientConnectionId:28c13d7b-e822-40c8-a89f-d48fa7aaa3bf
Error Number:50000,State:1,Class:16
2019-10-17 15:54:48,282 TestUser FATAL - There are not enough fields in the Structured type.  Structured types must have at least one field.
System.ArgumentException: There are not enough fields in the Structured type.  Structured types must have at least one field.
   at System.Data.SqlClient.TdsParser.TdsExecuteRPC(SqlCommand cmd, _SqlRPC[] rpcArray, Int32 timeout, Boolean inSchema, SqlNotificationRequest notificationRequest, TdsParserStateObject stateObj, Boolean isCommandProc, Boolean sync, TaskCompletionSource`1 completion, Int32 startRpc, Int32 startParam)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at EMIS.PatientFlow.DatabaseAccess.DbAccess.AddKioskDetails(Kiosk kiosk, String user) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.DatabaseAccess\DBAccess.Kiosk.cs:line 1145
   at EMIS.PatientFlow.Repositories.KioskRepository.AddKioskDetails(Kiosk kiosk) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.Repositories\KioskRepository.cs:line 287
2019-10-17 16:34:22,559 TestSqlUser FATAL - Error Code :-2146232060 - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 16:34:22,625 TestSqlUser2 FATAL - Errors :Message : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. Exception Number : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. Source : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. Server : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. Procedure : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. LineNumber : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'.Message : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Exception Number : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Source : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Server : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Procedure : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. LineNumber : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 16:34:22,633 TestUser FATAL - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
System.Data.SqlClient.SqlException (0x80131904): AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at EMIS.PatientFlow.DatabaseAccess.DbAccess.AddKioskDetails(Kiosk kiosk, String user) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.DatabaseAccess\DBAccess.Kiosk.cs:line 1145
   at EMIS.PatientFlow.Repositories.KioskRepository.AddKioskDetails(Kiosk kiosk) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.Repositories\KioskRepository.cs:line 287
ClientConnectionId:72b10d94-06f9-45d2-8876-94c514b3fa2f
Error Number:50000,State:1,Class:16
2019-10-17 16:36:33,498 TestSqlUser FATAL - Error Code :-2146232060 - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 16:36:33,505 TestSqlUser2 FATAL - Errors :Message : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. Exception Number : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. Source : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. Server : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. Procedure : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'. LineNumber : AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'.Message : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Exception Number : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Source : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Server : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. Procedure : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION. LineNumber : The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
2019-10-17 16:36:33,506 TestUser FATAL - AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
System.Data.SqlClient.SqlException (0x80131904): AddKioskDetails : 547: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PatientFlow_KioskLinkedToDetails_SiteId". The conflict occurred in database "EMISPatientFlowConfiguration", table "PatientFlow.Site", column 'SiteId'.
The ROLLBACK TRANSACTION request has no corresponding BEGIN TRANSACTION.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at EMIS.PatientFlow.DatabaseAccess.DbAccess.AddKioskDetails(Kiosk kiosk, String user) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.DatabaseAccess\DBAccess.Kiosk.cs:line 1145
   at EMIS.PatientFlow.Repositories.KioskRepository.AddKioskDetails(Kiosk kiosk) in C:\Code\NewPortal(UIWithUX)\NewPortal\EMIS.PatientFlow\EMIS.PatientFlow.Repositories\KioskRepository.cs:line 287
ClientConnectionId:72b10d94-06f9-45d2-8876-94c514b3fa2f
Error Number:50000,State:1,Class:16
